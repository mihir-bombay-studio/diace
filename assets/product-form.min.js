class ProductForm extends HTMLElement{constructor(){super();this.form=this.querySelector("form");this.form.addEventListener("submit",this.onSubmitHandler.bind(this));this.cartNotification=document.querySelector("cart-notification")}onSubmitHandler(c){c.preventDefault();this.cartNotification.setActiveElement(document.activeElement);const b=this.querySelector('[type="submit"]');b.setAttribute("disabled",!0);b.classList.add("loading");c=JSON.stringify({...JSON.parse(serializeForm(this.form)),sections:this.cartNotification.getSectionsToRender().map(a=>
a.id),sections_url:window.location.pathname});fetch(`${routes.cart_add_url}`,{...fetchConfig("javascript"),body:c}).then(a=>a.json()).then(a=>{this.cartNotification.renderContents(a)}).catch(a=>{console.error(a)}).finally(()=>{b.classList.remove("loading");b.removeAttribute("disabled")})}}customElements.define("product-form",ProductForm);
