class CartRemoveButton extends HTMLElement{constructor(){super();this.addEventListener("click",a=>{a.preventDefault();this.closest("cart-items").updateQuantity(this.dataset.index,0)})}}customElements.define("cart-remove-button",CartRemoveButton);
class CartItems extends HTMLElement{constructor(){super();this.lineItemStatusElement=document.getElementById("shopping-cart-line-item-status");this.currentItemCount=Array.from(this.querySelectorAll('[name="updates[]"]')).reduce((a,b)=>a+parseInt(b.value),0);this.debouncedOnChange=debounce(a=>{this.onChange(a)},300);this.addEventListener("change",this.debouncedOnChange.bind(this))}onChange(a){this.updateQuantity(a.target.dataset.index,a.target.value,document.activeElement.getAttribute("name"))}getSectionsToRender(){return[{id:"main-cart-items",
section:document.getElementById("main-cart-items").dataset.id,selector:".js-contents"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"cart-live-region-text",section:"cart-live-region-text",selector:".shopify-section"},{id:"main-cart-footer",section:document.getElementById("main-cart-footer").dataset.id,selector:".js-contents"}]}updateQuantity(a,b,e){this.enableLoading(a);b=JSON.stringify({line:a,quantity:b,sections:this.getSectionsToRender().map(c=>c.section),
sections_url:window.location.pathname});fetch(`${routes.cart_change_url}`,{...fetchConfig(),body:b}).then(c=>c.text()).then(c=>{const f=JSON.parse(c);this.classList.toggle("is-empty",0===f.item_count);document.getElementById("main-cart-footer")?.classList.toggle("is-empty",0===f.item_count);this.getSectionsToRender().forEach(d=>{(document.getElementById(d.id).querySelector(d.selector)||document.getElementById(d.id)).innerHTML=this.getSectionInnerHTML(f.sections[d.section],d.selector)});this.updateLiveRegions(a,
f.item_count);document.getElementById(`CartItem-${a}`)?.querySelector(`[name="${e}"]`)?.focus();this.disableLoading()}).catch(()=>{this.querySelectorAll(".loading-overlay").forEach(c=>c.classList.add("hidden"));document.getElementById("cart-errors").textContent=window.cartStrings.error;this.disableLoading()})}updateLiveRegions(a,b){this.currentItemCount===b&&(document.getElementById(`Line-item-error-${a}`).querySelector(".cart-item__error-text").innerHTML=window.cartStrings.quantityError.replace("[quantity]",
document.getElementById(`Quantity-${a}`).value));this.currentItemCount=b;this.lineItemStatusElement.setAttribute("aria-hidden",!0);const e=document.getElementById("cart-live-region-text");e.setAttribute("aria-hidden",!1);setTimeout(()=>{e.setAttribute("aria-hidden",!0)},1E3)}getSectionInnerHTML(a,b){return(new DOMParser).parseFromString(a,"text/html").querySelector(b).innerHTML}enableLoading(a){document.getElementById("main-cart-items").classList.add("cart__items--disabled");this.querySelectorAll(".loading-overlay")[a-
1].classList.remove("hidden");document.activeElement.blur();this.lineItemStatusElement.setAttribute("aria-hidden",!1)}disableLoading(){document.getElementById("main-cart-items").classList.remove("cart__items--disabled")}}customElements.define("cart-items",CartItems);
