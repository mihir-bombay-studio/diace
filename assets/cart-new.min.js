function openCart(){$(".cart-mask").addClass("active")}function toggleCart(){$(".cart-mask").toggleClass("active")}function closeCart(){$(".cart-mask").removeClass("active")}$(document).keyup(function(a){27==a.keyCode&&closeCart()});$(".cart-toggler, .cart-close").click(function(){toggleCart()});$(document).mouseup(function(a){let b=$(".cart-container");b.is(a.target)||0!==b.has(a.target).length||closeCart()});function reduceOpacity(a){$(`#${a}`).animate({opacity:"0.3"},300)}
function fullOpacity(a){$(`#${a}`).animate({opacity:"1"},300)}$("#cart_container").on("click",".qty-minus",function(){var a=parseInt($(this).next().data("qty"));let b=parseInt($(this).data("variant-id"));1!=a?(--a,$(this).next().data("qty",a),$(this).next().html(a),UpdateCart(b)):delete_item(b)});$("#cart_container").on("click",".qty-plus",function(){var a=parseInt($(this).prev().data("qty"));let b=parseInt($(this).data("variant-id"));a+=1;$(this).prev().data("qty",a);$(this).prev().html(a);UpdateCart(b)});
function cartItemCount(a){0<a.item_count?($("#cart-quantity").removeClass("no-disp"),$("#cart-quantity .cart-items-num").text(`${a.item_count}`)):($("#cart-quantity").addClass("no-disp"),$("#cart-quantity .cart-items-num").text(""))}function getCartDetails(){jQuery.getJSON("/cart.js",function(a){cartItemCount(a);refreshCart(a)})}function convertNumber(a){return(a/100).toFixed(2).replace(".",",")}
function refreshCart(a){let b=$("#cart_container").data("handle"),e=a.items,d="";if(0<a.item_count){d+='<div class="cart-list">';for(var f=0;f<e.length;f++){let c=a.items[f];b===c.handle?$("#cart_container").addClass("hide-upsell"):null;d+=`
        <div id="cart_item_${c.variant_id}" class="list-item ${f}">
          <a href="${c.url}" class="product-img">
            <img class="cart-item__image"
                src="${c.image}"
                alt="${c.product_title}"
                loading="lazy"
                width="75"
                height="75"
                >
          </a>
          <div class="product-info">
            <div class="product-name semibold"><a href="${c.url}">${c.product_title}</a></div>
            <div class="flex-box justify-between">
              <div class="product-variant light">${"Default Title"!=c.variant_title&&"null"!=c.variant_title?c.variant_title:""}</div>
              <div class="count">
                <span data-variant-id="${c.variant_id}" class="qty-minus cart-minus-icon">-</span>
                <span id="item_count_${c.variant_id}" class="item-count-number" data-qty="${c.quantity}">${c.quantity}</span>
                <span data-variant-id="${c.variant_id}" class="qty-plus cart-plus-icon ">+</span>
              </div>
            </div>
            <div class="item-price">
              
              <span class="discount-price semibold">${convertNumber(c.price)}</span>
            </div>
            <button data-variant-id="${c.variant_id}" class="remove-item">verwijderen <span class="dustbin">${renderSvg.icon_remove}</span></button>
          </div>
        </div>`}d=d+"</div >"+`<div id="upsell_item_${current_variant.id}" class="upsell-container">
      <div class="upsell-heading semibold">Mensen kochten ook:</div>
      <div class="list-item">
        <a href="${upsell.url}" class="product-img">
          <img 
              src="${upsell.image}" 
              alt="${upsell.title}" 
              class="upsell-img" 
              loading="lazy"
              >
        </a>
        <div class="product-info">
          <div class="product-name semibold"><a href="${upsell.url}">${upsell.title}</a></div>
           <div class="flex-box justify-between">
             <div class="w-100">
                <div class="flex-box justify-between">
                  <div class="product-variant light">${"Default Title"!=current_variant.title?current_variant.title:null}</div>
                </div>
                <div class="item-price flex-box justify-between">
                  <div class="">`;current_variant.compare_at_price?d+=`<span class="compare-at-price"> ${convertNumber(current_variant.compare_at_price)} </span>`:null;d+=`<span class="discount-price semibold">${convertNumber(current_variant.price)}</span>
                  </div>
                  <button 
                          class="add-upsell-btn semibold AddToCart no-mobile"
                          data-variant-id = "${current_variant.id}"
                          data-quantity = ""
                          > 
                    <span class="plus-circle">+</span> 
                    <span class="add-upsell-btn-text">Toevoegen</span> 
                  </button>
				</div>
              </div>
              <button 
                      class="add-upsell-btn AddToCart btn btn-yellow no-desktop"
                      data-variant-id = "${current_variant.id}"
                      data-quantity = ""
                      > 
                <span class="plus-circle">+</span> 
                <span class="">${renderSvg.icon_cart_new_black}</span> 
              </button>
             </div>
            </div>
          </div>
        </div>`;d+=`
    <div class="cart-footer">
      <div class="cart-calculation">
        <div class="flex-box justify-between">
          <div class="subtotal-label light">subtotal</div>
          <div id="sub_total_price" class="subtotal-price semibold">${convertNumber(a.total_price)}</div>
        </div>
        <div class="flex-box justify-between">
          <div class="dispatch-label light">Verzending</div>
          <div class="dispatch-msg semibold">Berekend in volgende stap</div>
        </div>
      </div>
      <a href="/checkout" class="checkout-btn">checkout</a>
      <div class="text-center no-mobile">
        <a href="/" class="continue-shop underline-link">Verder winkelen</a>
      </div>
    </div>`}else d+=`
      <div class="cart-empty-state">
        <div class="empty-msg">
          <div class="empty-state-heading semibold">Er zit nog niets in je mandje</div>
          <div class="empty-state-img">
			${renderSvg.icon_sad_outline}
          </div>
        </div>
        <div class="empty-state-links">
          <a href="#" class="empty-state-link">
            OPBERGEN
            <span class="">
              ${renderSvg.icon_yellow_down_chevron}
            </span>
          </a>
          <a href="#" class="empty-state-link">
            STICKERS
            <span class="">
              ${renderSvg.icon_yellow_down_chevron}
            </span>
          </a>
          <a href="#" class="btn btn-yellow category-btn">BEKIJK ALLE CATEGORIE\u00cbN</a>
        </div>
      </div>`;$("#cart_body_wrapper").html(d);openCart()}$("body").on("click",".AddToCart",function(){let a=parseInt($(this).data("variant-id"));var b=""!=$(this).data("quantity")?$(this).data("quantity"):$(".product-qty .qty").data("qty");console.log(a);b={items:[{id:a,quantity:parseInt(b)}]};$.ajax({url:"/cart/add.js",method:"POST",dataType:"json",data:b}).done(function(e){a==upsell.id?$("#cart_container .upsell-container").fadeOut("slow"):null;getCartDetails()}).fail(function(e){console.log(e)})});
function UpdateCart(a){$("#cart_container").addClass("block-cursor");reduceOpacity(`cart_item_${a}`);let b=$(`#item_count_${a}`).data("qty");if(0<b){let e={id:parseInt(`${a}`),quantity:parseInt(`${b}`)};$.ajax({url:"/cart/change.js",method:"POST",dataType:"json",data:e}).done(function(d){console.log(d);$(`#item_count_${a}`).text(b);cartItemCount(d);refreshCart(d);fullOpacity(`cart_item_${a}`);$("#cart_container").removeClass("block-cursor")}).fail(function(){console.log("failed to update")})}else delete_item(a)}
function delete_item(a){$("#cart_container").addClass("block-cursor");reduceOpacity(`cart_item_${a}`);$.ajax({url:"/cart/change.js",method:"POST",dataType:"json",data:{id:a,quantity:0}}).done(function(b){console.log(b);$(`#cart_item_${a}`).fadeOut("slow");a==upsell.id&&($("#cart_container .upsell-container").fadeIn("slow"),$("#cart_container").removeClass("hide-upsell"));cartItemCount(b);refreshCart(b);$("#cart_container").removeClass("block-cursor")}).fail(function(){console.log("failed to delete")})}
$("#cart_container").on("click",".remove-item",function(){let a=parseInt($(this).data("variant-id"));delete_item(a)});
